# BrainDrivePass
## é¡¹ç›®æ¦‚è¿°
è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºå‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„é©¾è€ƒç§‘ç›®ä¸€ç­”é¢˜ç³»ç»Ÿã€‚ä½œä¸ºè‡ªå·±ä¸€ä¸ªç»ƒæ‰‹çš„ååˆ†ç®€å•çš„ä¸€ä¸ªå°é¡¹ç›®ã€‚

å…¬ç½‘åœ°å€ 119.23.140.56

ç›®å‰å·²ç»å®ç°çš„åŠŸèƒ½æœ‰ï¼š
- ç™»å½•ã€æ³¨å†Œã€ä¿®æ”¹(å¿˜è®°)å¯†ç ã€é€€å‡º
- é¡ºåºç­”é¢˜ï¼šæŒ‰ç…§é¢˜ç›®é¡ºåºä½œç­”ï¼Œä¼šè®°å½•ä½œç­”å†å²ä¸æ”¶è—è®°å½•ï¼›
- éšæœºç­”é¢˜ï¼šæ¯æ¬¡éƒ½æŒ‰ç…§éšæœºé¡ºåºå®‰æ’é¢˜ç›®ï¼Œä¸ä¼šè®°å½•ä½œç­”å†å²ä¸æ”¶è—è®°å½•ï¼›
- æ¨¡æ‹Ÿè€ƒè¯•ï¼šè€ƒè¯•ä»¿çœŸï¼Œ50é“é¢˜ç›®ï¼Œä¼šè®°å½•æœªå®Œæˆè€ƒè¯•çš„ä¿¡æ¯ï¼Œä¾›ä¸‹æ¬¡é€‰æ‹©é‡æ–°å¼€å§‹æ–°çš„è€ƒè¯•æˆ–è€…åŠ è½½æœªå®Œæˆçš„ç­”é¢˜ï¼›
- é”™é¢˜è®°å½•ï¼šæŸ¥çœ‹é¡ºåºç­”é¢˜ä¸­æ›¾ç»é”™è¯¯çš„é¢˜ç›®ï¼Œå¯ä»¥ç§»é™¤é¢˜ç›®ï¼Œæ ‡è®°ä¸ºæ­£ç¡®ï¼›
- æ”¶è—è®°å½•ï¼šæŸ¥çœ‹æ”¶è—çš„é¢˜ç›®ï¼Œå¯ä»¥å–æ¶ˆå¯¹é¢˜ç›®çš„æ”¶è—ï¼›

æˆ–è®¸åç»­è¿˜ä¼šç»§ç»­æ›´æ–°å’Œå®Œå–„ğŸ¤”ï¸ğŸ¤”ï¸ğŸ¤”ï¸ï¼Ÿ

## å‰ç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯                        | ç‰ˆæœ¬      | æè¿°                                         |
| :-------------------------- | :-------- | :------------------------------------------- |
| axios                       | ^1.6.7    | ç”¨äºå‘èµ· HTTP è¯·æ±‚çš„ Promise based åº“         |
| element-ui                  | ^2.15.14  | åŸºäº Vue.js çš„ç»„ä»¶åº“ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢        |
| vue                         | ^2.6.14   | æ¸è¿›å¼ JavaScript æ¡†æ¶ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢      |
| vue-router                  | ^3.5.1    | Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ï¼Œå®ç°å•é¡µé¢åº”ç”¨å¯¼èˆª   |
| vuex                        | ^3.6.2    | Vue.js å®˜æ–¹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºé›†ä¸­ç®¡ç†åº”ç”¨çŠ¶æ€ |
| vuex-persistedstate         | ^4.1.0    | ç”¨äºåœ¨ Vuex ä¸­å®ç°çŠ¶æ€æŒä¹…åŒ–çš„æ’ä»¶             |
### å‰ç«¯é¡¹ç›®ç»“æ„
```shell
tree
.
â”œâ”€â”€ README.md
â”œâ”€â”€ babel.config.js
â”œâ”€â”€ jsconfig.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ favicon.ico
â”‚Â Â  â””â”€â”€ index.html
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.vue
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ car.png
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ loginpic.jpeg
â”‚Â Â  â”‚Â Â  â””â”€â”€ logo.png
â”‚Â Â  â”œâ”€â”€ components
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ common
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DataHeader.vue
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ SideNav.vue
â”‚Â Â  â”‚Â Â  â””â”€â”€ element
â”‚Â Â  â”‚Â Â      â””â”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ config
â”‚Â Â  â”‚Â Â  â””â”€â”€ axiosConfig.js
â”‚Â Â  â”œâ”€â”€ main.js
â”‚Â Â  â”œâ”€â”€ router
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ store
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ utils
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ apiHelper.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dataHelper.js
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notifyMessageHelper.js
â”‚Â Â  â”‚Â Â  â””â”€â”€ vuexHelper.js
â”‚Â Â  â”œâ”€â”€ validate
â”‚Â Â  â”‚Â Â  â””â”€â”€ emailValidate.js
â”‚Â Â  â””â”€â”€ views
â”‚Â Â      â”œâ”€â”€ forget_password.vue
â”‚Â Â      â”œâ”€â”€ inner
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ exam_stats.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ exam_view.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ fav_view
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fav_empty.vue
â”‚Â Â      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ fav_layout.vue
â”‚Â Â      â”‚Â Â  â”‚Â Â  â””â”€â”€ fav_not_empty.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ layout_view.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ order_view.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ random_view.vue
â”‚Â Â      â”‚Â Â  â””â”€â”€ wrong_view
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ wrong_empty.vue
â”‚Â Â      â”‚Â Â      â”œâ”€â”€ wrong_layout.vue
â”‚Â Â      â”‚Â Â      â””â”€â”€ wrong_not_empty.vue
â”‚Â Â      â”œâ”€â”€ login_view.vue
â”‚Â Â      â”œâ”€â”€ status
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 400_page.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 401_page.vue
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ 404_page.vue
â”‚Â Â      â”‚Â Â  â””â”€â”€ 500_page.vue
â”‚Â Â      â””â”€â”€ user_registry.vue
â””â”€â”€ vue.config.js

17 directories, 42 files
```
### ä¸€äº›ç»†èŠ‚
- å‰ç«¯ä½¿ç”¨ axios å‘é€ ajax è¯·æ±‚çš„æ“ä½œéƒ½åœ¨å°è£…åœ¨ apiHelper.js æ–‡ä»¶ä¸­ï¼Œä»¥ä¸‹æ˜¯æ¥å£å£°æ˜
- 
  | æ–¹æ³•          | æ¥å£                               | æè¿°              |
  |--------------|------------------------------------|-----------------|
  | `GET`        | `/api/user/verificationCode`        | å‘é€éªŒè¯ç åˆ°æŒ‡å®šé‚®ç®±      |
  | `POST`       | `/api/user/updatePassword`          | æäº¤å¸¦æœ‰éªŒè¯ç çš„æ›´æ–°å¯†ç     |
  | `POST`       | `/api/user/registry`                 | æ³¨å†Œæ–°ç”¨æˆ·           |
  | `POST`       | `api/user/login`                     | ç”¨æˆ·ç™»å½•            |
  | `GET`        | `/api/practice/questionByOrderId`   | æ ¹æ®æŒ‡å®šç´¢å¼•è·å–é—®é¢˜      |
  | `GET`        | `/api/practice/recAndFav`            | è·å–ç­”é¢˜è®°å½•å’Œæ”¶è—è®°å½•     |
  | `GET`        | `/api/exam/paper`                    | è·å–åŒ…å«éšæœºé—®é¢˜çš„æ¨¡æ‹Ÿè€ƒè¯•è¯•å· |
  | `POST`       | `/api/exam/score`                    | æäº¤ç”¨æˆ·çš„è€ƒè¯•åˆ†æ•°       |
  | `GET`        | `/api/exam/score`                    | è¯»å–ç”¨æˆ·çš„è€ƒè¯•åˆ†æ•°       |
  | `GET`        | `/api/practice/rightAnswer`          | è·å–ç»ƒä¹ é—®é¢˜çš„æ­£ç¡®ç­”æ¡ˆ     |
  | `POST`       | `/api/user/logout`                   | æ³¨é”€ç”¨æˆ·            |
  | `POST`       | `/api/practice/recAndFav`            | æäº¤ç­”é¢˜è®°å½•å’Œæ”¶è—å·¨é¹¿     |

- axios å¿…é¡»è®¾ç½®å…¨å±€ä»£ç†ï¼Œå› ä¸º axios éœ€è¦æŠŠå¯¹å‰ç«¯æœåŠ¡çš„è¯·æ±‚è½¬å‘ç»™åç«¯çš„ç½‘å…³ï¼Œè€Œåç«¯ç™»å½•éªŒè¯éœ€è¦ cookie ä¿¡æ¯ï¼Œaixos è·¨åŸŸé»˜è®¤ä¸ä¼šæºå¸¦ cookieï¼Œæ‰€ä»¥ axios éœ€è¦å¦‚ä¸‹çš„é…ç½®ï¼š
```java
// axios é…ç½®è·¨åŸŸæ·»åŠ  cookie
axios.defaults.withCredentials = true;
```
- axios å…¨å±€ä»£ç†ï¼Œå¼€å‘ç¯å¢ƒä¸‹æˆ‘è®¾ç½®çš„ç«¯å£ä¸º 7070ï¼Œéƒ¨ç½²æ—¶å‰ç«¯æœåŠ¡çš„ç«¯å£ç”± nginx é…ç½®å†³å®š
```java
const {defineConfig} = require('@vue/cli-service')
module.exports = defineConfig({
    productionSourceMap: false,
    transpileDependencies: true,
    devServer: {
        //æœ¬åœ° npm run server æ—¶çš„ç«¯å£
        port: 7070,
        proxy: {
            // ä»£ç†ä»¥ '/api' å¼€å¤´çš„è¯·æ±‚
            '/api': {
                target: 'http://localhost:9000',
                changeOrigin: true,
                // ä»£ç†è½¬å‘è¯·æ±‚ï¼Œä¸æºå¸¦ '/api'å‰ç¼€
                pathRewrite: {
                    '^/api': ''
                }
            }
        }
    }
})
```
### å‰ç«¯éƒ¨ç½²
å‰ç«¯ä½¿ç”¨ nginx éƒ¨ç½²ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹
1. ç¡®ä¿æœ¬åœ°å®‰è£…äº† npm å·¥å…·ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…å‰ç«¯æ‰€éœ€çš„ä¾èµ–
```shell
npm run install
```
2. åœ¨é…ç½®æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æœ¬åœ°åŒåç«¯å·¥ç¨‹ä¾æ¬¡è¿è¡Œï¼Œè¿›è¡Œæµ‹è¯•ï¼›è¿è¡Œå‰ç«¯é¡¹ç›®éœ€è¦è¿è¡Œ
```shell
npm run serve
```
3. æ‰“åŒ…é¡¹ç›®ï¼Œä¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ç”Ÿæˆ /dist æ–‡ä»¶å¤¹ï¼Œæ˜¯é¡¹ç›®ç¼–è¯‘ç”Ÿæˆçš„é™æ€èµ„æº
4. éƒ¨ç½²åˆ°æœåŠ¡å™¨çš„ nginxï¼Œåªéœ€ä¿®æ”¹ nginx çš„é…ç½®æ–‡ä»¶å³å¯ï¼Œé‡ç‚¹ä¿®æ”¹ server å­—æ®µï¼ŒæŒ‰è¦æ±‚é…ç½®ä¸‹åˆ—ä¸‰ä¸ªæ³¨é‡Šéƒ¨åˆ†å³å¯
```conf
server
    {
        # è®¾ç½® nginx é»˜è®¤ç›‘å¬çš„ç«¯å£
        listen 80;
        server_name braindrivepass;
        index index.html index.htm index.php;
        # dist æ–‡ä»¶åœ¨æœ¬åœ°çš„ç»å¯¹è·¯å¾„
        root  /www/wwwroot/braindrivepass/dist;

        #error_page   404   /404.html;
        include enable-php.conf;
        
        location ^~ /api/
        {
          #è¿™é‡Œé…ç½®åç«¯é¡¹ç›®ç½‘å…³çš„ ip å’Œç«¯å£
          proxy_pass  http://localhost:9000/;
        }
      
        
        location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
        {
            expires      30d;
        }

        location ~ .*\.(js|css)?$
        {
            expires      12h;
        }

        location ~ /\.
        {
            deny all;
        }

        access_log  /www/wwwlogs/access.log;
    }
include /www/server/panel/vhost/nginx/*.conf;
}
```
## åç«¯æŠ€æœ¯æ ˆ
springcloud ä½¿ç”¨ Hoxton SR10ç‰ˆæœ¬ï¼›æ‰“åŒ…ä½¿ç”¨ maven

| æŠ€æœ¯          | æè¿°                                      |
|--------------|------------------------------------------|
| Redis        | ä½œä¸ºç¼“å­˜å±‚æˆ–æ¶ˆæ¯ä»£ç†çš„å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨          |
| MySQL        | ç”¨äºå­˜å‚¨å’Œç®¡ç†ç»“æ„åŒ–æ•°æ®çš„å¼€æºå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ  |
| Spring Cloud  | ä¸€ç»„æ¥è‡ªSpringç”Ÿæ€ç³»ç»Ÿçš„å·¥å…·å’Œæ¡†æ¶ï¼Œç”¨äºç®€åŒ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘ï¼Œæä¾›æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’Œè´Ÿè½½å¹³è¡¡ç­‰åŠŸèƒ½  |
| Gateway      | åœ¨Spring Cloudä¸­ï¼ŒæŒ‡çš„æ˜¯å……å½“å¾®æœåŠ¡çš„APIç½‘å…³ï¼Œå¤„ç†è·¯ç”±ã€èº«ä»½éªŒè¯ã€è´Ÿè½½å¹³è¡¡ç­‰è·¨é¢†åŸŸå…³æ³¨ç‚¹  |
| Nacos        | ç”¨äºæœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒåŠ¨æ€DNSæœåŠ¡çš„å¼€æºå¹³å°ï¼Œå±äºäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šçš„ä¸€éƒ¨åˆ†  |
| OpenFeign    | Netflixå¼€å‘çš„å£°æ˜å¼WebæœåŠ¡å®¢æˆ·ç«¯ï¼Œç®€åŒ–äº†å‘å…¶ä»–å¾®æœåŠ¡å‘å‡ºHTTPè¯·æ±‚çš„è¿‡ç¨‹  |
| SaToken      | ä¸€æ¬¾ç®€å•é«˜æ•ˆçš„Javaèº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ï¼Œæä¾›åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯ã€æˆæƒå’Œä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½  |
### é¡¹ç›®ç»“æ„
```shell
tree
.
â”œâ”€â”€ common
â”‚Â Â  â”œâ”€â”€ pom.xml
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ main
â”‚Â Â          â””â”€â”€ java
â”‚Â Â              â””â”€â”€ com
â”‚Â Â                  â””â”€â”€ wup
â”‚Â Â                      â”œâ”€â”€ constants
â”‚Â Â                      â”‚Â Â  â””â”€â”€ RedisConstants.java
â”‚Â Â                      â”œâ”€â”€ entity
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ AnswerRecord.java
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ DTO
â”‚Â Â                      â”‚Â Â  â”‚Â Â  â”œâ”€â”€ RecAndFavDto.java
â”‚Â Â                      â”‚Â Â  â”‚Â Â  â””â”€â”€ ScoreDTO.java
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ Favorite.java
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ Question.java
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ Score.java
â”‚Â Â                      â”‚Â Â  â””â”€â”€ User.java
â”‚Â Â                      â””â”€â”€ utils
â”‚Â Â                          â”œâ”€â”€ MailUtil.java
â”‚Â Â                          â”œâ”€â”€ Result.java
â”‚Â Â                          â””â”€â”€ SHA256.java
â”œâ”€â”€ exam-service
â”‚Â Â  â”œâ”€â”€ pom.xml
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ main
â”‚Â Â          â”œâ”€â”€ java
â”‚Â Â          â”‚Â Â  â””â”€â”€ com
â”‚Â Â          â”‚Â Â      â””â”€â”€ wup
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ ExamServiceApplication.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ SaTokenConfigure.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ controller
â”‚Â Â          â”‚Â Â          â”‚Â Â  â””â”€â”€ ExamController.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ mapper
â”‚Â Â          â”‚Â Â          â”‚Â Â  â””â”€â”€ ScoreMapper.java
â”‚Â Â          â”‚Â Â          â””â”€â”€ service
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ ExamService.java
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ ScoreService.java
â”‚Â Â          â”‚Â Â              â””â”€â”€ impl
â”‚Â Â          â”‚Â Â                  â”œâ”€â”€ ExamServiceImpl.java
â”‚Â Â          â”‚Â Â                  â””â”€â”€ ScoreServiceImpl.java
â”‚Â Â          â””â”€â”€ resources
â”‚Â Â              â”œâ”€â”€ bootstrap.yml
â”‚Â Â              â””â”€â”€ mapper
â”‚Â Â                  â””â”€â”€ ScoreMapper.xml
â”œâ”€â”€ feign-api
â”‚Â Â  â”œâ”€â”€ pom.xml
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ main
â”‚Â Â          â””â”€â”€ java
â”‚Â Â              â””â”€â”€ com
â”‚Â Â                  â””â”€â”€ wup
â”‚Â Â                      â”œâ”€â”€ FeignInterceptor.java
â”‚Â Â                      â”œâ”€â”€ client
â”‚Â Â                      â”‚Â Â  â”œâ”€â”€ PracticeClient.java
â”‚Â Â                      â”‚Â Â  â””â”€â”€ UserClient.java
â”‚Â Â                      â””â”€â”€ config
â”‚Â Â                          â””â”€â”€ DefaultFeignConfiguration.java
â”œâ”€â”€ gateway
â”‚Â Â  â”œâ”€â”€ pom.xml
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ main
â”‚Â Â          â”œâ”€â”€ java
â”‚Â Â          â”‚Â Â  â””â”€â”€ com
â”‚Â Â          â”‚Â Â      â””â”€â”€ wup
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ ForwardAuthFilter.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ GatewayApplication.java
â”‚Â Â          â”‚Â Â          â””â”€â”€ SaTokenConfigure.java
â”‚Â Â          â””â”€â”€ resources
â”‚Â Â              â””â”€â”€ bootstrap.yml
â”œâ”€â”€ pom.xml
â”œâ”€â”€ practice-service
â”‚Â Â  â”œâ”€â”€ pom.xml
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ main
â”‚Â Â          â”œâ”€â”€ java
â”‚Â Â          â”‚Â Â  â””â”€â”€ com
â”‚Â Â          â”‚Â Â      â””â”€â”€ wup
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ PracticeServiceApplication.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ SaTokenConfigure.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ controller
â”‚Â Â          â”‚Â Â          â”‚Â Â  â””â”€â”€ PPracticeController.java
â”‚Â Â          â”‚Â Â          â”œâ”€â”€ mapper
â”‚Â Â          â”‚Â Â          â”‚Â Â  â”œâ”€â”€ AnswerRecordMapper.java
â”‚Â Â          â”‚Â Â          â”‚Â Â  â”œâ”€â”€ FavoriteMapper.java
â”‚Â Â          â”‚Â Â          â”‚Â Â  â””â”€â”€ QuestionMapper.java
â”‚Â Â          â”‚Â Â          â””â”€â”€ service
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ AnswerRecordService.java
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ FavoriteService.java
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ PracticeService.java
â”‚Â Â          â”‚Â Â              â”œâ”€â”€ QuestionService.java
â”‚Â Â          â”‚Â Â              â””â”€â”€ impl
â”‚Â Â          â”‚Â Â                  â”œâ”€â”€ AnswerRecordServiceImpl.java
â”‚Â Â          â”‚Â Â                  â”œâ”€â”€ FavoriteServiceImpl.java
â”‚Â Â          â”‚Â Â                  â”œâ”€â”€ PracticeServiceImpl.java
â”‚Â Â          â”‚Â Â                  â””â”€â”€ QuestionServiceImpl.java
â”‚Â Â          â””â”€â”€ resources
â”‚Â Â              â”œâ”€â”€ bootstrap.yml
â”‚Â Â              â””â”€â”€ mapper
â”‚Â Â                  â”œâ”€â”€ AnswerRecordMapper.xml
â”‚Â Â                  â”œâ”€â”€ FavoriteMapper.xml
â”‚Â Â                  â””â”€â”€ QuestionMapper.xml
â””â”€â”€ user-service
    â”œâ”€â”€ pom.xml
    â””â”€â”€ src
        â””â”€â”€ main
            â”œâ”€â”€ java
            â”‚Â Â  â””â”€â”€ com
            â”‚Â Â      â””â”€â”€ wup
            â”‚Â Â          â”œâ”€â”€ SaTokenConfigure.java
            â”‚Â Â          â”œâ”€â”€ UserServerApplication.java
            â”‚Â Â          â”œâ”€â”€ controller
            â”‚Â Â          â”‚Â Â  â””â”€â”€ UserController.java
            â”‚Â Â          â”œâ”€â”€ mapper
            â”‚Â Â          â”‚Â Â  â””â”€â”€ UserMapper.java
            â”‚Â Â          â””â”€â”€ service
            â”‚Â Â              â”œâ”€â”€ UserService.java
            â”‚Â Â              â””â”€â”€ impl
            â”‚Â Â                  â””â”€â”€ UserServiceImpl.java
            â””â”€â”€ resources
                â”œâ”€â”€ bootstrap.yml
                â””â”€â”€ mapper
                    â””â”€â”€ UserMapper.xml

62 directories, 62 files
```
### nacos
- nacos é…ç½®æ–‡ä»¶ zip å‹ç¼©åŒ…åœ¨æœ¬ä»“åº“çš„æ ¹ç›®å½•ä¸‹ï¼Œåœ¨ nacos ç›´æ¥ä¸Šä¼ å‹ç¼©åŒ…é…ç½®å°±å¯ä»¥å¯¼å…¥é…ç½®ï¼Œæ ¹æ®è‡ªå·±çš„é…ç½®è¿›è¡Œä¿®æ”¹
- nacos å¿…é¡»æå‰å¯åŠ¨ï¼Œåœ¨æ¯ä¸ªé¡¹ç›®çš„ `bootstrap.yml` æ–‡ä»¶ä¸­é…ç½® nacos çš„ ipï¼Œé»˜è®¤ç«¯å£ä¸º 8848
- æœ¬é¡¹ç›®çš„ nacos é…ç½®æ–‡ä»¶åŒ…å«äº† `dev`ä¸`prod`ä¸¤ç§ç¯å¢ƒï¼Œé…ç½®éƒ½å¤§åŒå°å¼‚ï¼Œæ³¨æ„ nacos é…ç½®æ–‡ä»¶æ˜¯ä¸æœåŠ¡åç§°ä¸`profile`å‚æ•°æœ‰å…³

### Gateway ç½‘å…³
Gateway è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼ˆç«¯å£å· 9000ï¼‰ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å¯ä»¥åœ¨ æ¨¡å—çš„ `bootstrap.yaml`ä¸ nacos å¯¹åº”çš„é…ç½®ä¸­è·å–
è¿™é‡Œå…³æ³¨ç½‘å…³çš„è·¯ç”±è½¬å‘è§„åˆ™
```yml
cloud:
    gateway:
        routes:
            - id: user-service
              uri: lb://user-service
              predicates:
                - Path=/user/**

            - id: practice-service
              uri: lb://practice-service
              predicates:
                - Path=/practice/**

            - id: exam-service
              uri: lb://exam-service
              predicates:
                - Path=/exam/**
```

| æœåŠ¡åç§°                  | ç«¯å£  | è·¯ç”±è§„åˆ™               | ç›®æ ‡æœåŠ¡ (URI)                        |
|--------------------------|-------|----------------------|--------------------------------------|
| ç”¨æˆ·æœåŠ¡ (user-service)    | 9001  | åŒ¹é…è·¯å¾„ä¸º `/user/**`     | ä½¿ç”¨è´Ÿè½½å‡è¡¡ `lb://user-service`     |
| ç»ƒä¹ æœåŠ¡ (practice-service)| 9002  | åŒ¹é…è·¯å¾„ä¸º `/practice/**` | ä½¿ç”¨è´Ÿè½½å‡è¡¡ `lb://practice-service` |
| è€ƒè¯•æœåŠ¡ (exam-service)    | 9003  | åŒ¹é…è·¯å¾„ä¸º `/exam/**`     | ä½¿ç”¨è´Ÿè½½å‡è¡¡ `lb://exam-service`     |

### é‚®ç®±æœåŠ¡
ä½¿ç”¨äº†é˜¿é‡Œäº‘çš„é‚®ä»¶æ¨é€åŠŸèƒ½ï¼Œå‘é€é‚®ä»¶éªŒè¯ç 
### Satoken
- Satoken é›†æˆåœ¨ç½‘å…³å†…ï¼Œé€šè¿‡é…ç½®å…¨å±€æ‹¦æˆªå™¨è¿›è¡Œç»Ÿä¸€çš„ç™»å½•éªŒè¯
- å…¶ä¸­æŸä¸ªå¾®æœåŠ¡ä½¿ç”¨ Feign è°ƒç”¨å…¶ä»–çš„å¾®æœåŠ¡çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¢«æ‹¦æˆªï¼Œæ³¨æ„å¯¹åº”æ‹¦æˆªå™¨çš„é…ç½®ï¼Œåœ¨ feign è½¬å‘è¯·æ±‚çš„æ—¶å€™éœ€è¦åŠ ä¸Š cookie
- Satoken ä¼šä½¿ç”¨ redisï¼Œç¡®ä¿ redis é…ç½®æ­£ç¡®
- ç”±äºæ‰€æœ‰å¾®æœåŠ¡çš„ç«¯å£éƒ½æš´éœ²ï¼Œsatoken æ­£ç¡®é…ç½®ï¼Œå¯ä»¥ä¿è¯ç»•è¿‡ç½‘å…³ç›´æ¥è®¿é—®å­æœåŠ¡
- å…·ä½“çš„ä½¿ç”¨å¯ä»¥å‚è€ƒ satoken å®˜æ–¹ç½‘ç«™ https://sa-token.cc/index.html å¼ºçƒˆæ¨èğŸ§¨
### APIå‚è€ƒ
#### user-service
| HTTP æ–¹æ³•  | è·¯å¾„                   | æ–¹æ³•å                      | å‚æ•°                                           | æè¿°                                   |
|------------|------------------------|-----------------------------|------------------------------------------------|----------------------------------------|
| GET        | /user/verificationCode | sendVerificationCode        | email: String                                 | å‘é€éªŒè¯ç                              |
| POST       | /user/updatePassword    | submitModifyPassword       | email: String, password: String, verificationCode: String | æ›´æ–°å¯†ç                                |
| POST       | /user/registry          | createAccount               | username: String, password: String, phone: String | åˆ›å»ºè´¦æˆ·                               |
| POST       | /user/login             | login                       | username: String, password: String              | ç”¨æˆ·ç™»å½•                               |
| POST       | /user/logout            | logout                      | username: String                              | ç”¨æˆ·æ³¨é”€                               |
| GET        | /user/getIdByUsername   | getIdByUsername             | username: String                              | æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ· ID                   |
#### practice-service
| HTTP æ–¹æ³•  | è·¯å¾„                        | æ–¹æ³•å              | å‚æ•°                                        | æè¿°           |
|------------|-----------------------------|---------------------|---------------------------------------------|--------------|
| GET        | /practice/questionByOrderId | getQuestionByOrder  | orderId: Integer                            | æ ¹æ®é—®é¢˜åºå·è·å–é—®é¢˜   |
| GET        | /practice/recAndFav         | readRecAndFav       | username: String                           | è¯»å–ç­”é¢˜è®°å½•å’Œæ”¶è—çš„é—®é¢˜ |
| POST       | /practice/recAndFav         | writeRecAndFav      | recAndFavJSON: String                      | å†™å…¥ç­”é¢˜è®°å½•å’Œæ”¶è—çš„é—®é¢˜ |
| GET        | /practice/paper             | getExamPaper        | randoms: List<Integer>                     | è·å–æ¨¡æ‹Ÿè€ƒè¯•è¯•å·     |
| GET        | /practice/rightAnswer       | getRightAnswer      | æ— å‚æ•°                                      | è·å–ç»ƒä¹ é—®é¢˜çš„æ­£ç¡®ç­”æ¡ˆ  |
#### exam-service
| HTTP æ–¹æ³•  | è·¯å¾„                  | æ–¹æ³•å        | å‚æ•°                               | æè¿°                      |
|------------|-----------------------|---------------|------------------------------------|---------------------------|
| POST       | /exam/score           | writeScore    | scoreDTO: ScoreDTO                 | æäº¤è€ƒè¯•åˆ†æ•°              |
| GET        | /exam/score           | readScore     | username: String                   | è¯»å–ç”¨æˆ·çš„è€ƒè¯•åˆ†æ•°        |
| GET        | /exam/paper           | getExamPaper  | randoms: String (ä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²) | è·å–æ¨¡æ‹Ÿè€ƒè¯•è¯•å·          |
### éƒ¨ç½²
1. ä½¿ç”¨ maven è¿›è¡Œæ‰“åŒ…ï¼Œæ³¨æ„æ‰€æœ‰çš„æœ‰å¯åŠ¨ç±»çš„æ¨¡å—éƒ½éœ€è¦åŠ ä¸Š`sping-boot-maven-plugin` maven ä¾èµ–ï¼›çˆ¶å·¥ç¨‹å£°æ˜æ‰“åŒ…æ–¹å¼`pom`
2. åœ¨çˆ¶å·¥ç¨‹æ‰“åŒ…(mvn clean; mvn package)ï¼Œä¼šå°†æ‰€æœ‰å­æ¨¡å—éƒ½è¿›è¡Œæ‰“åŒ…ï¼Œæ¯ä¸ªæ¨¡å—é»˜è®¤ä¼šå°†æ‰€æœ‰çš„ä¾èµ–éƒ½æ‰“è¿›è‡ªå·±çš„jarï¼Œæ‰€ä»¥æ‰“åŒ…åäº§ç‰©ä½“ç§¯è¿˜æ¯”è¾ƒå¤§
3. è·å–å¾®æœåŠ¡æ‰“åŒ…äº§ç”Ÿçš„ jarä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ–è€…å…¶ä»–æœºå™¨ï¼Œåœ¨å®‰è£…äº† java è¿è¡Œæ—¶(æˆ‘è¿™é‡Œæ˜¯ OpenJDK1.8)çš„æœºå™¨ä¸Šå¯åŠ¨ jar åŒ…å³å¯ï¼Œå¯ä»¥é…ç½®å¯¹åº”çš„ jvm å‚æ•°ï¼Œä»¥åŠè®¾ç½®åå°è¿è¡Œ(nohupå‘½ä»¤)ï¼Œä¸è‡ªå·±è®¾ç½®æ—¥å¿—ä½ç½®ï¼Œnohup ä¼šé»˜è®¤è¾“å‡ºæ—¥å¿—
```shell
nohup java [jvm å‚æ•°ï¼Œä¾‹å¦‚-Xmx=128m Xms=128m] -jar xxx.jar > [æŸä¸ªè·¯å¾„]/xxx.log 2>&1 &
```


